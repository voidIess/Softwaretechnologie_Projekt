<!DOCTYPE html>

<html lang="de" xmlns:th="http://www.thymeleaf.org"
      th:replace="site_template :: template(#{statistics.title}, ~{::statistics})">
</html>

<html lang="de" xmlns:th="http://www.thymeleaf.org">
<div th:fragment="statistics">

    <script>
        window.onload = function () {

            const today = new Date();
            today.setHours(0, 0, 0, 0);

            //var date = Date.parse("2000/06/09");
            console.log("hguhkj");

            var chart1 = new CanvasJS.Chart("chartContainer1", {
                animationEnabled: true,
                title: {
                    text: "Wöchentliche Trainingsanalyse"
                },
                axisX: {
                    valueFormatString: "DDD",
                    min: new Date("[[${week[0]}]]"),
                    max: new Date("[[${week[6]}]]")
                },
                axisY: {
                    title: "Zeit in Minuten"
                },
                legend: {
                    verticalAlign: "top",
                    horizontalAlign: "right",
                    dockInsidePlotArea: true
                },
                toolTip: {
                    shared: true
                },
                data: [{
                    name: "durchschnittlicher Aufenthalt",
                    showInLegend: true,
                    type: "area",
                    color: "rgba(40,175,101,0.6)",
                    dataPoints:

                        [
                        { x: new Date("[[${week[0]}]]"), y: [[${averageTimesOfLastWeek[0]}]] },
                        { x: new Date("[[${week[1]}]]"), y: [[${averageTimesOfLastWeek[1]}]] },
                        { x: new Date("[[${week[2]}]]"), y: [[${averageTimesOfLastWeek[2]}]] },
                        { x: new Date("[[${week[3]}]]"), y: [[${averageTimesOfLastWeek[3]}]] },
                        { x: new Date("[[${week[4]}]]"), y: [[${averageTimesOfLastWeek[4]}]] },
                        { x: new Date("[[${week[5]}]]"), y: [[${averageTimesOfLastWeek[5]}]] },
                        { x: new Date("[[${week[6]}]]"), y: [[${averageTimesOfLastWeek[6]}]] }
                    ]
                }]
            });

            var chart2 = new CanvasJS.Chart("chartContainer2", {
                animationEnabled: true,
                title: {
                    text: "Wöchentliche Mitgliederanalyse"
                },
                axisX: {
                    valueFormatString: "DDD"
                },
                axisY: {
                    title: "Anzahl der Mitglieder"
                },
                legend: {
                    verticalAlign: "top",
                    horizontalAlign: "right",
                    dockInsidePlotArea: true
                },
                toolTip: {
                    shared: true
                },
                data: [{
                        name: "anwesende Mitglieder",
                        showInLegend: true,
                        legendMarkerType: "square",
                        type: "area",
                        color: "rgba(0,75,141,0.7)",
                        markerSize: 0,
                        dataPoints: [
                            { x: new Date("[[${week[0]}]]"), y: [[${memberAmountsOfLastWeek[0]}]] },
                            { x: new Date("[[${week[1]}]]"), y: [[${memberAmountsOfLastWeek[1]}]] },
                            { x: new Date("[[${week[2]}]]"), y: [[${memberAmountsOfLastWeek[2]}]] },
                            { x: new Date("[[${week[3]}]]"), y: [[${memberAmountsOfLastWeek[3]}]] },
                            { x: new Date("[[${week[4]}]]"), y: [[${memberAmountsOfLastWeek[4]}]] },
                            { x: new Date("[[${week[5]}]]"), y: [[${memberAmountsOfLastWeek[5]}]] },
                            { x: new Date("[[${week[6]}]]"), y: [[${memberAmountsOfLastWeek[6]}]] }
                        ]
                    }]
            });

            chart1.render();
            chart2.render();

        }
    </script>


<div>

<div class="ui container">
    <div class="ui items">
        <p>Heutige Besucheranzahl:
            <span th:text="${memberAmountsOfLastWeek[0]}">3</span>
            <span th:if="${memberAmountsOfLastWeek[0]==1}" th:text="Mitglied">3</span>
            <span th:if="${memberAmountsOfLastWeek[0]!=1}" th:text="Mitglieder">3</span>
        </p>
        <p>Heutiger durchschnittlicher Aufenthalt:
            <span th:text="${averageTimesOfLastWeek[0]}">2</span>
            <span th:if="${averageTimesOfLastWeek[0]==1}" th:text="Minute">2</span>
            <span th:if="${averageTimesOfLastWeek[0]!=1}" th:text="Minuten">2</span>
        </p>
    </div>

    <div id="chartContainer1" style="height: 370px; width: 100%; margin-top:75pt"></div>
    <div id="chartContainer2" style="height: 370px; width: 100%; margin-top:75pt"></div>

    <script src="https://canvasjs.com/assets/script/canvasjs.min.js"></script>


</div>
</div>
</div>
</html>